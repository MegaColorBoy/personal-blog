<!DOCTYPE html>
<html data-theme="" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Abdush Shakoor">
	
	<meta name="description" content="Sometimes, I write stuff about computers, math, technology & design..">
	<meta name="og:title" content="Writings | Abdush Shakoor's Weblog" />
	<meta name="og:type" content="article" />
	<meta name="og:url" content="" />
	<meta name="og:description" content="Sometimes, I write stuff about computers, math, technology & design." />
	<meta name="og:site_name" content="Abdush Shakoor's Weblog | Abdush Shakoor's Weblog" />
	
	<meta name="robots" content="follow">
	<title>Writings | Abdush Shakoor's Weblog </title>
	<link rel="stylesheet" href="/static/css/main.css" type="text/css">
	<link rel="stylesheet" href="/static/css/pygments.css" type="text/css">

	<link rel="apple-touch-icon" sizes="57x57" href="/static/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/static/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/static/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/static/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/static/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/static/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/static/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/static/favicon/png" sizes="192x192"  href="/static/favicon/android-icon-192x192.png">
<link rel="icon" type="image/static/favicon/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
<link rel="icon" type="image/static/favicon/png" sizes="96x96" href="/static/favicon/favicon-96x96.png">
<link rel="icon" type="image/static/favicon/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
<link rel="manifest" href="/static/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
	
	<!-- <script src="https://unpkg.com/phosphor-icons"></script> -->
	<!-- <script>
		if(localStorage.theme){
			document.documentElement.setAttribute('data-theme', localStorage.getItem("theme"));
		}
	</script> -->
</head>
<body class="">
	<!-- Navbar -->
	<header class="header">
	<!-- Logo with Author Name -->
	<div class="author">
		<a href="/">
			<img src="/static/logo.png" alt="megacolorboy">
			<div class="name">
				<h1>Abdush Shakoor's Weblog</h1>
				<p>Writings, experiments & ideas.</p>
			</div>
		</a>
	</div>
	<!-- Logo with Author Name -->
	<nav>
		<ul class="menu">
			
				<li><a href="/about">About</a></li>
			
				<li><a href="/archive">Archive</a></li>
			
				<li><a href="/resume">Resume</a></li>
			
		</ul>
	</nav>	
</header>

<main>
	<div class="two-col-grid">
		<section id="primary">
			<div class="articles">
				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/the-cryptopals-crypto-challenges-set-1--convert-hex-to-base64">The Cryptopals Crypto Challenges: Set 1 - Convert Hex to Base64</a></h1>
		<p class="description">Convert Hexadecimal strings to encoded Base64 strings.</p>
	</div>
	<div class="article-body">
		<p>This is the <a href="http://cryptopals.com/sets/1/challenges/1">first challenge</a> of Set 1 in The Cryptopals Crypto Challenges website. If you want to know more about these challenges, look at my <a href="/posts/the-cryptopals-crypto-challenges">previous post</a>.</p>

<p>For this challenge, you need to be able to convert Hexadecimal strings to encoded Base64 strings:</p>

<p>The string:</p>

<div class="codehilite"><pre><span></span><code>49276d206b696c6c696e6720796f757220627261696e206c696b65206120706f69736f6e6f7573206d757368726f6f6d
</code></pre></div>

<p>Should produce:</p>

<div class="codehilite"><pre><span></span><code>SSdtIGtpbGxpbmcgeW91ciBicmFpbiBsaWtlIGEgcG9pc29ub3VzIG11c2hyb29t
</code></pre></div>

<p>Not only is this challenge just a warmup but it is also designed to make you feel comfortable in dealing with raw bytes as Base64 is used to encode binary information and Hexadecimal is used to view the raw bytes.</p>

<h2>How to convert from Hexadecimal to Base64?</h2>

<p>Well, it's simpler than you think! You will have to go through the following steps:</p>

<ol>
<li><a href="#step-1">Convert hexadecimal string to binary string</a></li>
<li><a href="#step-2">Split the binary string into 4 pieces of 6 bits each</a></li>
<li><a href="#step-3">Convert the binary string to decimal</a></li>
<li><a href="#step-4">Compare each decimal against each character in a reference string of 64 characters</a></li>
</ol>

<h3><a id="step-1"></a> Convert hexadecimal string to binary string</h3>

<p>Before converting to binary, you should compare each character against a hashmap table of hardcoded hexadecimal keys and binary values.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Hashmap that contain hex key and binary values</span>
<span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CryptoLib</span><span class="o">::</span><span class="n">gen_hex_table</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;0&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0000&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;1&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0001&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;2&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0010&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;3&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0011&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;4&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0100&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;5&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0101&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;6&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0110&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;7&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0111&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;8&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1000&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;9&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1001&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1010&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;b&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1011&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;c&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1100&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;d&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1101&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;e&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1110&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="p">[</span><span class="sc">&#39;f&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1111&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">map</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">//Convert hex to string</span>
<span class="n">string</span><span class="w"> </span><span class="n">CryptoLib</span><span class="o">::</span><span class="n">con_hex_2_bin</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">hexStr</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gen_hex_table</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">newStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="n">hexStr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">hexStr</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">newStr</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">hexStr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">newStr</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">hexStr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="c1">// newStr += m.find(hexStr[i])-&gt;second;</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">newStr</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3><a id="step-2"></a> Split the binary string into 4 pieces of 6 bits each</h3>

<p>Base64 represents data in the form of ASCII format that follows a Radix-64 representation. Each character is picked from a set of 64 characters, which means that I'll only need 6 bits represent each character because <strong>2<sup>6</sup> = 64 characters</strong>.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Add spaces between strings</span>
<span class="n">string</span><span class="w"> </span><span class="nf">CryptoLib::add_spaces</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">spaces</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">newStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">str</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="c1">// newStr += str[i];</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">spaces</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">newStr</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">i</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">newStr</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">            </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">newStr</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3><a id="step-3"></a> Convert the binary string to decimal</h3>

<p>Before converting, you should know that a decimal number is equal to the sum of binary digits (d~n~) times their power of 2 (2<sup>n</sup>).</p>

<p>Let's say you have a binary string of <mark>111001</mark>, it's decimal
would be <mark>1x2<sup>5</sup> + 1x2<sup>4</sup> + 1x2<sup>3</sup> + 0x2<sup>2</sup> + 0x2<sup>1</sup> + 1x2<sup>0</sup> =
57</mark></p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Convert binary to decimal</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CryptoLib</span><span class="o">::</span><span class="n">con_bin_2_dec</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">power</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">newStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">istringstream</span><span class="w"> </span><span class="nf">iss</span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">iss</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">power</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">decimal</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">pow</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="n">p</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">decimal</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3><a id="step-4"></a> Compare each decimal against each character in a reference string of 64 characters</h3>

<p>At this stage, all you have to do is find and concatenate each character (using the reference string) based on each decimal and return your encoded Base64 string as the final output.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Convert HEX to Base 64</span>
<span class="n">string</span><span class="w"> </span><span class="nf">CryptoLib::con_hex_2_b64</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">b64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">newStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">add_spaces</span><span class="p">(</span><span class="n">con_hex_2_bin</span><span class="p">(</span><span class="n">str</span><span class="p">),</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">con_bin_2_dec</span><span class="p">(</span><span class="n">newStr</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">b64</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ref</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">b64</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Here's the final section of the code:</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//CryptoPals Set 1 Challenge 1</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;crypto.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CryptoLib</span><span class="w"> </span><span class="n">crypt</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Test case provided from the site</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;49276d206b696c6c696e6720796f757220627261696e206c696b65206120706f69736f6e6f7573206d757368726f6f6d&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">crypt</span><span class="p">.</span><span class="n">con_hex_2_b64</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p><strong><em>Note: This solution and the library named <code>crypto.h</code> was built using the C++ programming language. The source code for this solution can be found on Github.</em></strong></p>

<p>Stay tuned for the next challenge.</p>

	</div>
	<div class="article-footer">
		<time>December 6th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/cryptography/">
					Cryptography
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/the-cryptopals-crypto-challenges">The Cryptopals Crypto Challenges</a></h1>
		<p class="description">Came across an interesting website that hosts cryptographic challenges based on real world cryptography.</p>
	</div>
	<div class="article-body">
		<p>Last week, I came across an interesting website named <a href="http://cryptopals.com/">The Cryptopals
Crypto Challenges</a> (also known as The Matasano
Crypto Challenges) that hosts cryptographic challenges based on
real-world cryptography that makes use of various ciphers and secure
protocols.</p>

<h2>What is it about?</h2>

<p>These challenges were developed by a security team called <a href="https://www.nccgroup.trust/us/">NCC
Security</a>, which is developed as a tool
for teaching <a href="https://en.wikipedia.org/wiki/Cryptography">Cryptography</a>.</p>

<p>Currently, there are eight sets of problems in which each set gets
progressively harder as you solve them. As I'm writing this post, I'm
solving the <a href="http://cryptopals.com/sets/1">first set</a> of problems, these
problems are designed in such a way that you get to build own
cryptographic functions/utilities and exploit them. Most importantly,
not only do these challenges give you an overview on how to build secure
cryptographic systems but also you'll get an understanding on how
they're being attacked.</p>

<p>In the first few challenges, I was exposed to some crypto math but these
concepts weren't that hard as it was more practical and gentler:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Modular_arithmetic">Modular arithmetic</a></li>
<li>Working with different bases such as Base 2 and Base 16</li>
<li><a href="http://en.wikipedia.org/wiki/Hamming_distance">Hamming Distance</a></li>
<li><a href="https://en.wikipedia.org/wiki/Standard_deviation">Standard Deviation and Variance</a></li>
<li><a href="https://en.wikipedia.org/wiki/Frequency_(statistics)">Frequency</a></li>
</ul>

<p>Also, I found myself using different techniques to solve these
challenges such as:</p>

<ul>
<li>String manipulation</li>
<li>Lookup tables / Hashmaps</li>
<li>Conversion of string to integer and vice-versa</li>
<li>Bitwise operators</li>
</ul>

<p>Like I had mentioned above, this is also designed as a tool to learn
cryptography, which means you don't really need to have prior knowledge
of cryptography and security. It's all about doing your own research on
various algorithms, implementing the solution and then breaking your own
solution.</p>

<h2>Why do I want to do this?</h2>

<p>I found it as a good opportunity to sharpen my C++ programming skills
and learn more about cryptographical theory and it's applications. If
you're curious and passionate enough to solve puzzles, this is your
chance!</p>

<h2>What's next?</h2>

<p>I will be posting walkthroughs (on how I solved every problem in each
set) on my blog and also provide solutions to those problems on my
<a href="https://www.github.com/megacolorboy">GitHub</a> repository.</p>

<p>Stay tuned!</p>

	</div>
	<div class="article-footer">
		<time>November 11th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/cryptography/">
					Cryptography
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/new-feature-share-your-reaction">New feature: Share your reaction</a></h1>
		<p class="description">Rolled out a new feature to collect emotional intelligence, which would help me to make better blog posts in the future.</p>
	</div>
	<div class="article-body">
		<p>Last night, I was thinking on how to improve my blog posts and post better articles. My head went through questions like:</p>

<ul>
<li>What do people feel when they read my articles?</li>
<li>Do they find it interesting?</li>
<li>Is it boring?</li>
<li>Is it likeable?</li>
</ul>

<p>But, in order to do that, I'll require some simple analytics on how people react to my articles on my blog. Taking inspiration from web applications like Facebook, Instagram, Twitter and Medium, I decided to build a small feature named "Share your reaction", from scratch, that would contain six different emotions.</p>

<figure style="text-align: center;">
    <div>
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/like.png"> 
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/love.png"> 
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/haha.png"> 
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/wow.png"> 
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/sad.png"> 
        <img style="width: 32px; height:32px; display: inline-block; margin-left: 10px; margin-right: 10px;" src="/static/images/new_emojis/angry.png">
    </div>
    <figcaption>The six different emotions used in this new feature</figcaption>
</figure>

<p>From today onwards, you can start reacting to my blog posts by clicking the <strong><em>"React!"</em></strong> button (which can be found below every article), select an emotion and help me improve and post better articles in my blog in the future.</p>

<p>In case, you're wondering, the data that is collected is <strong><em>completely anonymous</em></strong> as I'm not collecting any IP address or any of your private and sensitive information.</p>

<p>Hope you guys like the new feature!</p>

	</div>
	<div class="article-footer">
		<time>October 14th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/update/">
					Update
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/leave-me-alone-i-just-want-to-write-code">Leave me alone, I just want to write code!</a></h1>
		<p class="description">Do you think that programmers don't have to interact with people? This article will give you an insight.</p>
	</div>
	<div class="article-body">
		<p>The title of this post might be "clickbait" but there are some software developers who believe that they are supposed to just write code and not interact with people.</p>

<p>There are a lot of books that deal with sort of topic but in today's article, I will be borrowing heavily from my career experience and a favorite book of mine named <a href="https://www.amazon.com/Soft-Skills-software-developers-manual/dp/1617292397">Soft Skills: The Software Developer's Life Manual</a> to talk about how important it is for a software developer to interact with people.</p>

<h2>I'm a software developer, why should I interact with people?</h2>

<p>Earlier, I used to be under the impression that software developers are supposed to be glued in to their screens like a Hollywood hacker and just write code. But hey, I'm sure that I'm not the only one who had been thinking in that direction.</p>

<p>In fact, a portion of our time is being spent on interacting with people because not only are we writing code-logic for the computer to understand but it is mainly written for humans to aid in solving their daily problems. If that's not the scenario that means we'd all be talking to computers in binary form or machine language.</p>

<p>As time passed by, I learnt that in order to become a better software developer, you really should know how to deal with people (but I still like being glued to my two HD monitors!).</p>

<figure>
    <img src="/static/images/workspace.png"/>
    <figcaption>My current workspace</figcaption>
</figure>

<p>Think about it, where do the project requirements come from? Is it from computers? <strong><em>No, it's from people</em></strong>. Can your code send you an email to fix the new bug? <strong><em>No, people can</em></strong>.</p>

<p>A few examples:</p>

<ul>
<li>Sitting down on weekly meetings with your boss or clients</li>
<li>Communicating with team members about the problem that you're working on and strategizing a way to solve that problem</li>
</ul>

<p>If you still have the same mindset, you'd better rethink on that again because just like any other profession, you will have to interact with people.</p>

<h2>How do I deal with people?</h2>

<p>Like I had mentioned, at the very beginning of this article, there are a lot of books based on this topic but I'll try to keep it short and talk about a few points that might give you an idea on how to deal with people:</p>

<ul>
<li><a href="#tip-1">Everybody needs to feel essential</a></li>
<li><a href="#tip-2">Try not to criticize</a></li>
<li><a href="#tip-3">Consider what the other person needs</a></li>
<li><a href="#tip-4">Stay away from arguments</a></li>
</ul>

<h3><a id="tip-1"></a> Everybody needs to feel essential</h3>

<p>Let's face it, everyone loves to take the spotlight and would like to make everyone listen to them but there's nothing wrong about it as it's one of humanity's most desperate and deepest desires that help motivate us to achieve some of our greatest goals in our career, life and society.</p>

<p>Likewise, you're not the only one who has got amazing ideas, every individual does. It's very easy for you to discard one's idea, so that you can present yours instead but when you make this error, it might backfire on you i.e. you'll find others not listening to your ideas because you didn't value theirs in the first place.</p>

<p>So, always make it a point, if you want people to accept your ideas and think it's valuable, you'll also have to do the same thing, in return, for everyone else.</p>

<h3><a id="tip-2"></a> Try not to criticize</h3>

<p>Back in my university days, when I was working on my graduation project, I used to face a lot of criticism from a fellow Computer Science Professor, who thought negativity is an effective way to motivate an individual and responded to all faults with harsh criticism but I feel that's a wrong method to motivate an individual.</p>

<p>If you want to inspire or motivate people to do their best, you should encourage them with positivity than harsh negativity, this could help boost their self esteem and performance as a software developer.</p>

<p>On the contrary, a little bit of critical feedback to help improve one's problem solving skills is totally fine.</p>

<h3><a id="tip-3"></a> Consider what the other person needs</h3>

<p>During my career, I learnt that I should think about what's important to the other individual and what they want than what's important to me and what I want.</p>

<p>Whenever you enter in a conversation with your team member or boss, make sure you see things from their perspective. Try to understand their requirements and then when it's your turn, phrase the dialog in ways that your implementation matches their requirement.</p>

<p>Having shifted your mindset to this direction, you'll be making the person feel more essential and be more open to their ideas. In return, you can use leverage it in ways where people would deal with you in a favorable manner and value your ideas and skillset.</p>

<h3><a id="tip-4"></a> Stay away from arguments</h3>

<p>One of the most common things that most software developers do is that they falsely believe that pure solid reasoning is enough to make another person accept your style of thinking because they assume that the latter might think about things from a logical perspective. Believe me, even I did this when talking to a lot of people.</p>

<p>But then, we all have this sort of nature in which we tend to pride ourselves on our own intellectual prowess but a slight difference in opinion, it hits us right in our ego and opens up a potential door for arguments.</p>

<p>For this reason, at all costs, it's best to avoid arguments of any sorts because talking in terms of logic and pure reasoning would do little to convince a screaming toddler. Whenever you reach a point of disagreement on how things should be done, it is best to determine whether or not that particular direction is the right way to reach the top of the hill and especially, if it involves another individual, weigh the pros and cons of a decision.</p>

<p>I'd like to share an interesting quote:</p>

<blockquote>
  <p>"I have to come to the conclusion that there is only one way under high heaven to get the best of an argument &mdash; and that is to avoid it. Avoid it as you would avoid rattlesnakes and earthquakes." - Dale Carnegie, How to Win Friends and Influence People (1936)</p>
</blockquote>

<p>Probably, it wouldn't hurt much if you try to look for an opportunity to give up and admit that you're wrong on a small matter but, perhaps, it could be a big deal to the other person, which will help you build a good image and respect with them and can be leveraged in the future.</p>

<h2>In conclusion</h2>

<p>Being a good software developer isn't about being really skilled at coding (although, it's an imperative skillset!) but it's also about having good soft skills. If you ever thought that you have never worked on your soft skills, then this is time right for you to begin as you'll find your career much more enjoyable and accumulate a lot of skills and benefits in the future that will help you down the lane.</p>

<p>Hope you liked reading this article!</p>

<p>Au Revoir!</p>

	</div>
	<div class="article-footer">
		<time>October 7th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/essay/">
					Essay
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/building-something-out-of-nothing">Building something out of nothing</a></h1>
		<p class="description">What does it feel like to transform an idea into reality?</p>
	</div>
	<div class="article-body">
		<p>I know, it's been a while since my last article and this time, I felt that I wanted to talk about something different. For a change, I was going through some folders of my old, unused projects and I thought of improvising them and mash all of those projects into a virtual smartwatch! So, start exploring it!</p>

<p>I'd like to share one of my favorite quotes:</p>

<blockquote>
  <p>"I'm personally convinced that computer science has a lot in common with physics. Both are about how the world works at a rather fundamental level. The difference, of course, is that while in physics you're supposed to figure out how the world is made up, in computer science you create the world. Within the confines of the computer, you're the creator. You get to ultimately control everything that happens. If you're good enough, you can be God. On a small scale." &mdash; <cite><a href="https://tildesites.bowdoin.edu/~ltoma/teaching/beautyOfProgramming.pdf">Linus Torvalds in The Beauty of Programming</a></cite></p>
</blockquote>

<p>Sometimes when working with huge complex systems, useless error messages, unusually long SQL queries or an abominable APIs, I forget why I enjoy computer science. Every once in a while, reading a quote like the one above, would put me back in the right direction.</p>

<p>I know this might sound a bit cheesy but back in my childhood days, I liked watching <a href="https://en.wikipedia.org/wiki/Dexter%27s_Laboratory">Dexter's Laboratory</a> and the idea that Dexter had a secret lab and he was able to build robots and gadgets was one of those things that I found really fascinating as a child.</p>

<p>The reason I chose Computer Science in the first place was to be able to build my own things from scratch. Whenever I had an "itch to scratch", I would require nothing but my mind, my favorite text editor (<a href="https://www.sublimetext.com/">Sublime Text</a>), a Terminal and turn up some good classical music like <a href="https://en.wikipedia.org/wiki/Wolfgang_Amadeus_Mozart">Mozart</a> or <a href="https://en.wikipedia.org/wiki/Ludwig_van_Beethoven">Beethoven</a> and start building from scratch.</p>

<p>The ability to start with an empty page in your text editor or IDE and wind up building something that works (despite, a lot of trial and error) is so gratifying in ways that's difficult to explain to anyone who's never built it.</p>

<p><strong>Virtual Smartwatch:</strong></p>

<ul>
<li>Press the Power button to ON/OFF Device.</li>
<li>Swipe left or right to switch between applications.</li>
</ul>

<figure>
    <iframe width="500" height="520" src="/static/projects/smartwatch/"></iframe>
    <figcaption>Uhh yeah, it's somewhat identical to Apple Watch</figcaption>
</figure>

<p>For those of you who know how to program, you can understand that there's nothing like having a "thrill" of being able to build anything that your mind can think of. And for those who are learning or yet to learn, it will come out but you'll just have to explore further. Maybe it's that tiny feeling of accomplishment provided that you're able to explain to other people about how the whole thing works or perhaps, maybe I'm just too immature enough to work with other people's code.</p>

<p>Although, sometimes, I've felt the need to spend more time working on solving "useful" problems during my free time as time passes by, building tiny projects like these allow me to refresh my knowledge. It also applies very well to projects that I did to learn something. My previous projects like <a href="/posts/i-built-a-sudoku-solver/">Sudoku</a> and <a href="/posts/arcade-challenge-3-pong/">Pong</a> are some of the examples. Small, self-contained, visually interactive projects that I built just for fun.</p>

<p>Hope you guys liked reading this article!</p>

<p>Adios Amigo!</p>

	</div>
	<div class="article-footer">
		<time>September 16th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/essay/">
					Essay
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/arcade-challenge-4-tetris">Arcade Challenge 4: Tetris</a></h1>
		<p class="description">This is the fourth article of the Arcade Challenge series. In this article, I'll be talking about Tetris, it's history and game mechanics, in short.</p>
	</div>
	<div class="article-body">
		<script defer type="text/javascript" src="/static/projects/tetris/js/tetris.js"></script>

<script defer type="text/javascript" src="/static/projects/tetris/js/render.js"></script>

<script defer type="text/javascript" src="/static/projects/tetris/js/controller.js"></script>

<figure>
    <canvas style="border-radius: 0px;background-color:#333;" id="tetris_canvas" width="300" height="600"></canvas>
</figure>

<p>Before you read more about this article, play with the above game. It's simple, control each block using <strong><em>WASD</em></strong> keys to rotate and move the block to the left, right and down of the canvas.</p>

<p>This is part of the <a href="/posts/i-challenged-myself-to-build-4-arcade-games">Arcade Challenge</a> series. If you haven't read the previous articles, here you go:</p>

<ul>
<li><a href="/posts/arcade-challenge-1-snake-game/">Snake Game</a></li>
<li><a href="/posts/arcade-challenge-2-breakout/">Breakout</a></li>
<li><a href="/posts/arcade-challenge-3-pong/">Pong</a></li>
</ul>

<h2>Background</h2>

<p>Tetris is a tile-matching puzzle game in which you have shapes called "Tetrominoes" (I'll be talking about it more in detail below.) falling down vertically from above into a matrix or "the well". The game's objective is to set a high score by manipulating the seven shapes (but I didn't set a scoring system for this implementation) by moving left, right, down or rotating the shape by 90 degree units. As the game progresses, the tetrominoes would fall faster in every level, thus, making it challenging to play.</p>

<h2>History</h2>

<p>In 1984, the game was invented, designed and programmed by an AI researcher named <a href="https://en.wikipedia.org/wiki/Alexey_Pajitnov">Alexey Pajitnov</a>, who at the time worked for the <strong><em>Soviet Academy of Sciences</em></strong> in Moscow.</p>

<figure>
    <img src="https://upload.wikimedia.org/wikipedia/en/8/8d/NES_Tetris_Box_Front.jpg"/>
    <figcaption>Tetris cover art</figcaption>
</figure>

<p>Alexey Pajitnov was inspired by the classic Roman puzzle game called <a href="https://en.wikipedia.org/wiki/Pentomino">Pentomino</a>. In 1985, the game was published for various game consoles.</p>

<h2>Game mechanics</h2>

<p>This game has quite some interesting mechanics, for those who don't know, here it is:</p>

<ul>
<li><a href="#generating-shapes">Generating Shapes</a></li>
<li><a href="#collision">Collision</a></li>
<li><a href="#freeze-the-line">Freeze the Line</a></li>
<li><a href="#rotating-shapes">Rotating Shapes</a></li>
<li><a href="#clearing-the-line">Clearing the Line</a></li>
</ul>

<h3><a id="generating-shapes"></a> Generating Shapes</h3>

<p>These shapes are called <strong><em>"tetrominoes"</em></strong> i.e. a unique arrangement of 4 cells in a 4x4 grid. Mathematically, it is proven that there can only be seven tetrominoes on a <strong><em>two-dimensional space</em></strong>, which also means seven different ways to arrange 4 cells.</p>

<figure>
    <img src="http://oopsilon.com/06/texts/tetris-shapes.gif"/>
    <figcaption>The Seven Tetrominoes</figcaption>
</figure>

<p>I'm sure a lot of you know that Javascript doesn't have a special way of creating multi-dimensional arrays. So in order to draw a random shape, I had to convert a two-dimensional array index to a one-dimensional array index to fill each cell i.e. if it was a '1', it would be filled with color and if it's a '0', it would be empty.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Generate new random shape</span>
<span class="kd">function</span> <span class="nx">newShape</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">current</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">rand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">shapes</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">shape</span> <span class="o">=</span> <span class="nx">shapes</span><span class="p">[</span><span class="nx">rand</span><span class="p">];</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">current</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//convert 2D index to 1D index</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">4</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">x</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">shape</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nx">current</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="nx">rand</span> <span class="o">+</span> <span class="mf">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="nx">current</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">currentX</span> <span class="o">=</span> <span class="mf">5</span><span class="p">;</span>
    <span class="nx">currentY</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3><a id="collision"></a> Collision</h3>

<p>As I had mentioned in my <a href="/posts/arcade-challenge-3-pong/">previous post</a>, I was inspired to use the <a href="https://en.wikipedia.org/wiki/Minimum_bounding_box#Axis-aligned_minimum_bounding_box">AABB collision</a> algorithm to prevent the tetrominoes from going away from the canvas. Well, we all know that simple physics says that if an object is dropped from above, it should break the ones below but in this case, that doesn't happen. Instead, the tetrominoes are stacked on top of each other, which unlike real gravity, that contributes to the actual gameplay.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Check if this shape&#39;s position is valid in the board</span>
<span class="kd">function</span> <span class="nx">isValid</span><span class="p">(</span><span class="nx">offsetX</span><span class="p">,</span> <span class="nx">offsetY</span><span class="p">,</span> <span class="nx">newCurrent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//if offsetX is not set, set it to 0</span>
    <span class="nx">offsetX</span> <span class="o">=</span> <span class="nx">offsetX</span> <span class="o">||</span> <span class="mf">0</span><span class="p">;</span>
    <span class="c1">//if offsetY is not set, set it to 0</span>
    <span class="nx">offsetY</span> <span class="o">=</span> <span class="nx">offsetY</span> <span class="o">||</span> <span class="mf">0</span><span class="p">;</span>

    <span class="nx">offsetX</span> <span class="o">=</span> <span class="nx">currentX</span> <span class="o">+</span> <span class="nx">offsetX</span><span class="p">;</span>
    <span class="nx">offsetY</span> <span class="o">=</span> <span class="nx">currentY</span> <span class="o">+</span> <span class="nx">offsetY</span><span class="p">;</span>

    <span class="nx">newCurrent</span> <span class="o">=</span> <span class="nx">newCurrent</span> <span class="o">||</span> <span class="nx">current</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">newCurrent</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="ow">typeof</span> <span class="nx">board</span><span class="p">[</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetY</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span>
                <span class="ow">typeof</span> <span class="nx">board</span><span class="p">[</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetY</span><span class="p">][</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetX</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span>
                <span class="nx">board</span><span class="p">[</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetY</span><span class="p">][</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetX</span><span class="p">]</span> <span class="o">||</span>
                <span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetX</span> <span class="o">&lt;</span> <span class="mf">0</span> <span class="o">||</span>
                <span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetY</span> <span class="o">&gt;=</span> <span class="nx">rows</span> <span class="o">||</span>
                <span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetX</span> <span class="o">&gt;=</span> <span class="nx">cols</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">offsetY</span> <span class="o">==</span> <span class="mf">1</span><span class="p">){</span><span class="nx">lose</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;}</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div>

<h3><a id="freeze-the-line"></a> Freeze the Line</h3>

<p>Honestly, I could have come up with a better name but the method freeze() stops the shape at it's current position (i.e. after a collision has occurred) and saves it to the 2D canvas.</p>

<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">freeze</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">current</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="o">+</span><span class="nx">currentY</span><span class="p">][</span><span class="nx">x</span><span class="o">+</span><span class="nx">currentX</span><span class="p">]</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3><a id="rotating-shapes"></a> Rotating Shapes</h3>

<p>In order to rotate a shape perpendicularly anticlockwise, you have to perform an operation that flips the indices from bottom to top of the matrix, this operation is called <a href="https://en.wikipedia.org/wiki/Transpose">Matrix Transpose</a>. Although I learnt this in my math classes, I implemented this operation in a Computer Graphics course that I took, as an elective, in my university on Spring 2016 for the first time.</p>

<div class="codehilite"><pre><span></span><code><span class="c1">//Rotate the current moving shape</span>
<span class="kd">function</span> <span class="nx">rotate</span><span class="p">(</span><span class="nx">current</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">newCurrent</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">y</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">newCurrent</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">x</span><span class="o">&lt;</span><span class="mf">4</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">newCurrent</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span><span class="mf">3</span><span class="o">-</span><span class="nx">x</span><span class="p">][</span><span class="nx">y</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">newCurrent</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3><a id="clearing-the-line"></a> Clearing the Line</h3>

<p>At every update, the method named <strong><em>clearLines()</em></strong> has to scan for any complete row(s), if it's complete, the cells in those rows must be replaced with the ones above it. This gives a sort of <strong><em>"falling gravity"</em></strong> effect, when the remaining cells are replaced with the row that has been cleared.</p>

<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">clearLines</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//Bottom up approach</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rows</span> <span class="o">-</span> <span class="mf">1</span><span class="p">;</span> <span class="nx">y</span><span class="o">&gt;=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">y</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">isComplete</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">cols</span><span class="p">;</span> <span class="nx">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//if there&#39;s any empty cell in the row</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">board</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//Then the row isn&#39;t complete</span>
                <span class="nx">isComplete</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">//This code is to remove the current completed line,</span>
        <span class="c1">//and replace it with the line above it.</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">isComplete</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">y</span><span class="p">;</span> <span class="nx">i</span><span class="o">&gt;</span><span class="mf">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mf">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">cols</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">board</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">board</span><span class="p">[</span><span class="nx">i</span><span class="o">-</span><span class="mf">1</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">y</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>The game was built using HTML5 Canvas and Javascript, so please feel free to read the source code to understand the logic of the game. </p>

<h2>What's next?</h2>

<p>I know that in my <a href="/posts/i-challenged-myself-to-build-4-arcade-games/">first post</a>, I had mentioned that I'll do this whole challenge for a month but then I wasn't able to do everything in a month. So, I decided that I will be trying my best to remake more arcade games in the future and keep posting them on this blog. Hope you guys liked reading these articles!</p>

<p>Sayonara!</p>

<h2>References</h2>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Tetris">Tetris (1984)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Alexey_Pajitnov">Alexey Pajitnov</a></li>
<li><a href="https://en.wikipedia.org/wiki/Transpose">Matrix Transpose</a></li>
<li><a href="https://en.wikipedia.org/wiki/Minimum_bounding_box#Axis-aligned_minimum_bounding_box">Axis Aligned Bounding Collision</a></li>
</ul>

	</div>
	<div class="article-footer">
		<time>August 12th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/arcade-challenge/">
					Arcade Challenge
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/arcade-challenge-3-pong">Arcade Challenge 3: Pong</a></h1>
		<p class="description">This is the third article of the Arcade Challenge series. In this article, I'll be talking about Pong, it's history and game mechanics, in short.</p>
	</div>
	<div class="article-body">
		<script defer type="text/javascript" src="/static/projects/pong/js/pong.js"></script>

<figure>
    <canvas style="border-radius: 0px;" id="pong_canvas" width="500" height="500"></canvas>
</figure>

<p>Before you read more about this article, play with the above game. The rules are simple, control the paddle using <kbd>W</kbd> and <kbd>S</kbd> keys.</p>

<p>This is part of the <a href="/posts/i-challenged-myself-to-build-4-arcade-games/">Arcade Challenge</a> series. If you haven't read the previous articles, here you go:</p>

<ul>
<li><a href="/posts/arcade-challenge-1-snake-game/">Snake Game</a></li>
<li><a href="/posts/arcade-challenge-2-breakout/">Breakout</a></li>
</ul>

<h2>Background</h2>

<p>It's a 2D <a href="https://en.wikipedia.org/wiki/Table_tennis">table tennis</a> simulation game. The player controls a paddle that moves vertically up and down on the side of the screen and can compete against AI or a second player, who controls the second paddle on the opposite side. The aim of the game is to hit the ball back and forth and reach 11 points before the opponent (although, I didn't build a scoring system for my implementation as I felt it wasn't necessary).</p>

<h2>History</h2>

<p>Pong is one of the most popular and commercially successful arcade game built by <strong><em>Atari, Inc</em></strong> in 1972. It was the company's first game and was created by <a href="https://en.wikipedia.org/wiki/Allan_Alcorn">Allan Alcorn</a>, who got it as a warm-up exercise from the founder of the company, <a href="https://en.wikipedia.org/wiki/Nolan_Bushnell">Nolan Bushnell</a>.</p>

<h2>Game mechanics</h2>

<p>There are two important mechanics that made it challenging to build this game:</p>

<ul>
<li><a href="#gameai">Game AI</a></li>
<li><a href="#ballcollision">Ball Collision</a></li>
</ul>

<h2><a id="gameai"></a> Game AI</h2>

<p>While I was building Pong, I thought of making it a 2 player game but later I decided to build a simple AI to make things interesting. Building the AI logic for this was simple, <strong><em>"When the player paddle hits the ball, the AI should try it's best to position itself by tracking the ball's destination to hit the it's center"</em></strong>.</p>

<p><strong>Code snippet of the AI object:</strong></p>

<div class="codehilite"><pre><span></span><code><span class="kd">var</span> <span class="nx">ai</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mf">10</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span><span class="mf">100</span><span class="p">,</span>

    <span class="c1">//Update the AI paddle position based on the ball&#39;s direction</span>
    <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">dest_y</span> <span class="o">=</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">side</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">dest_y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">height</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span> <span class="mf">0</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">draw</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>  
</code></pre></div>

<h2>Ball Collision</h2>

<p>In this game, the collision works a little different than <a href="#">Breakout</a>'s version. I came across an algorithm called <a href="https://en.wikipedia.org/wiki/Minimum_bounding_box#Axis-aligned_minimum_bounding_box">Axis Aligned Bounding Box</a>, which is one of the simpler forms of detecting a collision between a set of objects that are axis aligned that means no rotation. This algorithm also inspired me to use it in my next game, Tetris. </p>

<p><strong>Code snippet of the Axis Aligned Bounding Boxes collision:</strong></p>

<div class="codehilite"><pre><span></span><code><span class="c1">//AABB Collision function</span>
<span class="kd">var</span> <span class="nx">AABBCollision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">,</span> <span class="nx">pw</span><span class="p">,</span> <span class="nx">ph</span><span class="p">,</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">bw</span><span class="p">,</span> <span class="nx">bh</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">px</span> <span class="o">&lt;</span> <span class="nx">bx</span><span class="o">+</span><span class="nx">bw</span> <span class="o">&amp;&amp;</span> <span class="nx">py</span> <span class="o">&lt;</span> <span class="nx">by</span><span class="o">+</span><span class="nx">bh</span> <span class="o">&amp;&amp;</span> <span class="nx">bx</span> <span class="o">&lt;</span> <span class="nx">px</span><span class="o">+</span><span class="nx">pw</span> <span class="o">&amp;&amp;</span> <span class="nx">by</span> <span class="o">&lt;</span> <span class="nx">py</span><span class="o">+</span><span class="nx">ph</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//if the ball has -ve velocity, it&#39;s hit by AI paddle and it&#39;s the player&#39;s turn</span>
<span class="c1">//if the ball has +ve velocity, it&#39;s hit by player paddle and it&#39;s the AI&#39;s turn</span>
<span class="kd">var</span> <span class="nx">paddle</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">0</span> <span class="o">?</span> <span class="nx">player</span> <span class="o">:</span> <span class="nx">ai</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="nx">AABBCollision</span><span class="p">(</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">side</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">side</span><span class="p">))</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">paddle</span> <span class="o">==</span> <span class="nx">player</span> <span class="o">?</span> <span class="nx">player</span><span class="p">.</span><span class="nx">x</span><span class="o">+</span><span class="nx">player</span><span class="p">.</span><span class="nx">width</span> <span class="o">:</span> <span class="nx">ai</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">side</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">side</span> <span class="o">-</span> <span class="nx">paddle</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nx">paddle</span><span class="p">.</span><span class="nx">height</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">side</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">phi</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="nx">pi</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2</span> <span class="o">*</span> <span class="nx">n</span> <span class="o">-</span> <span class="mf">1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="p">(</span><span class="nx">paddle</span> <span class="o">==</span> <span class="nx">player</span> <span class="o">?</span> <span class="mf">1</span> <span class="o">:</span> <span class="o">-</span><span class="mf">1</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">impact</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">phi</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="nx">pi</span> <span class="o">?</span> <span class="mf">1.5</span> <span class="o">:</span> <span class="mf">1</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">impact</span> <span class="o">*</span> <span class="nx">dir</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">phi</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">impact</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">phi</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>The game was built using HTML5 Canvas and Javascript, so please feel free to read the source code to understand the logic of the game.</p>

<h2>What's next?</h2>

<p>Building this game was fun as I built a simple AI and implemented a better collision detection algorithm. In my first post of this series, I had mentioned that I was working on Tetris and honestly, I finished building that game today as I didn't find the time to work on it. Now that it's ready, hence, my next post will be about <strong><em>Tetris</em></strong>. </p>

<p>Stay Tuned! </p>

<h2>References</h2>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Pong">Pong (1972)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Minimum_bounding_box#Axis-aligned_minimum_bounding_box">Axis Aligned Bounding Collision</a></li>
<li><a href="https://en.wikipedia.org/wiki/Allan_Alcorn">Allan Alcorn</a></li>
</ul>

	</div>
	<div class="article-footer">
		<time>August 11th, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/arcade-challenge/">
					Arcade Challenge
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
					
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/arcade-challenge-2-breakout">Arcade Challenge 2: Breakout</a></h1>
		<p class="description">This is the second post of this month's personal challenge. I'll be talking about Breakout, it's history and game mechanics, in short.</p>
	</div>
	<div class="article-body">
		<script defer type="text/javascript" src="/static/projects/breakout/js/breakout.js"></script>

<script defer type="text/javascript" src="/static/projects/breakout/js/ball_collision.js"></script>

<figure>
    <canvas style="border-radius: 0px;" id="breakout_canvas" width="500" height="500"></canvas>
</figure>

<p>Before you read more about this article, play with the above game. You can control the paddle using the mouse or left-right arrow keys. Press <kbd>P</kbd> to pause the game. Press <kbd>S</kbd> to resume and <kbd>R</kbd> to restart the game.</p>

<p>This is part of the <a href="/posts/i-challenged-myself-to-build-4-arcade-games/">Arcade Challenge</a> series. In the previous post, I built a snake game, <a href="/posts/arcade-challenge-1-snake-game/">click here</a> if you've not read the article.</p>

<h2>Background</h2>

<p>Breakout is a single player game where you have to break a layer of bricks with a ball that travels across the screen (in this case, it's a canvas) that bounces off the walls of the screen. When the ball hits a brick, the ball bounces back and of course, the brick gets destroyed or disappears. If the ball touches the bottom of the screen, the game is over. In order to prevent this from happening, the player is given a movable paddle to bounce the ball upwards, which ensures the game continues.</p>

<h2>History</h2>

<p>Breakout was one of the most popular arcade games developed by <strong><em>Atari, Inc.</em></strong> Inspired by the 1972's Pong, the game was developed and designed by <a href="https://en.wikipedia.org/wiki/Nolan_Bushnell">Nolan Bushnell</a>, <a href="https://en.wikipedia.org/wiki/Steve_Wozniak">Steve Wozniak</a>, Steve Bristow using the hardware built for Pong against it's competitors who built clones of Pong.</p>

<figure>
    <img src="http://68.media.tumblr.com/15f5cfe691599a10ad9ca9cf33f89ff9/tumblr_ntykhyjQXI1qjotzlo1_1280.jpg"/>
    <figcaption>Atari's Video Pinball console system</figcaption>
</figure>

<p>Most notably, the late <strong><em>Steve Jobs</em></strong> was also involved with the development of Breakout as he was approached by Nolan Bushnell to design a prototype that required 150 to 170 computer chips. Jobs brought in Wozniak to work with along with him on building the prototype, who built a version of Pong using 30 computer chips and they both had spent days and nights working on it and finally built the prototype that had 44 computer chips.</p>

<p>However, Wozniak's design wasn't approved by Atari, Inc as they found the design to be complicated and infeasible to manufacture, so they ended up making their own version of the hardware which contained around 100 computer chips.</p>

<h2>Game mechanics</h2>

<p>Unlike the previous post, the game mechanics of this game are quite simple to understand and it makes use of <a href="https://en.wikipedia.org/wiki/Two-dimensional_space">2D Mathematics</a>.</p>

<p>Using 2D Mathematics, I was able to program the ball-brick collision, movement and bounciness of the ball and the movement of the paddle (which can only move on the x-axis).</p>

<h3>Collision Detection</h3>

<p>To check for ball collision, the program must check if the ball has touched / collided with the wall, if so, then the ball's direction will be changed accordingly. The ball can only bounce off from the top, left and right side of the walls and the paddle, if it touches the bottom of the canvas, it's game over.</p>

<p><strong>Ball Movement and Collision Detection:</strong></p>

<p>If the distance between the ball radius and the wall's edge is the same, it will change the ball direction. This would allow a proper ball collision to bounce off the walls.</p>

<figure>
    <canvas style="border-radius: 0px;" id="ball_collision_canvas" width="500" height="300"></canvas>
</figure>

<p><strong>Code for Ball Movement and Collision Detection:</strong></p>

<div class="codehilite"><pre><span></span><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">//Canvas stuff</span>
    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;ball_collision_canvas&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>

    <span class="c1">//coordinates of the ball</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mf">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="mf">30</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dir_x</span> <span class="o">=</span> <span class="mf">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dir_y</span> <span class="o">=</span> <span class="mf">4</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ball_r</span> <span class="o">=</span> <span class="mf">10</span><span class="p">;</span>

    <span class="c1">//Draw a circle</span>
    <span class="kd">function</span> <span class="nx">circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#FF6D6D&quot;</span><span class="p">;</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="mf">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">*</span><span class="mf">2</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">//Draw canvas</span>
    <span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
        <span class="nx">circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">ball_r</span><span class="p">);</span>

        <span class="cm">/*</span>
<span class="cm">            If the distance between the ball radius and the wall&#39;s edge is the same,</span>
<span class="cm">            it will change the ball direction. This would allow a proper ball collision</span>
<span class="cm">            to bounce off the walls.</span>
<span class="cm">        */</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">dir_x</span> <span class="o">&gt;</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">ball_r</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">dir_x</span> <span class="o">&lt;</span> <span class="nx">ball_r</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">dir_x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">dir_x</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">dir_y</span> <span class="o">&gt;</span> <span class="nx">height</span> <span class="o">-</span> <span class="nx">ball_r</span> <span class="o">||</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">dir_y</span> <span class="o">&lt;</span> <span class="nx">ball_r</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">dir_y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">dir_y</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">x</span> <span class="o">+=</span> <span class="nx">dir_x</span><span class="p">;</span>
        <span class="nx">y</span> <span class="o">+=</span> <span class="nx">dir_y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">setInterval</span><span class="p">(</span><span class="nx">draw</span><span class="p">,</span> <span class="mf">10</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>The game was built using HTML5 Canvas and Javascript, so please feel free to read the source code to understand the logic of the game.</p>

<h2>What's next?</h2>

<p>In my next post, I'll be talking about the third game that I built in this challenge, Pong. Well, that's it for today, hope you guys have found this post interesting and yes, have fun playing the game!</p>

<p>Peace Out!</p>

<h2>References</h2>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Pong">Pong</a></li>
<li><a href="https://en.wikipedia.org/wiki/Two-dimensional_space">2D Dimensional Space</a></li>
<li><a href="https://en.wikipedia.org/wiki/Atari">Atari, Inc</a></li>
</ul>

	</div>
	<div class="article-footer">
		<time>July 22nd, 2017</time>
		<ul class="tags">
			
			<li>
				<a href="/category/arcade-challenge/">
					Arcade Challenge
				</a>
			</li>
			
		</ul>
	</div>
</div>

				
			</div>
			
<div class="pagination">
	
		
		<a href="/writings/pages/7">&laquo;</a>
			
	

	
		
			<a class="" href="/writings/">1</a>
		
	
		
			<a class="" href="/writings/pages/5">...</a>
		
	
		
			<a class="" href="/writings/pages/6">6</a>
		
	
		
			<a class="" href="/writings/pages/7">7</a>
		
	
		
			<a class="active" href="/writings/pages/8">8</a>
		
	

	
</div>

		</section>
		<section id="secondary">
			<div class="sidebar">
				<div class="author-intro">
	<h3>Writings</h3>
	<p>Sometimes, I write stuff about computers, math, technology & design.</p>
	<ul class="sitemap">
		<li><a class="back" href="/"><span></span> Check out more articles!</a></li>
	</ul>
</div>
				<!-- Tags -->
<div>
	<h3>Categories</h3>
	<ul class="tags">
		
		<li>
			<a href="/category/linux/">
				Linux
				<span class="count">19</span>
			</a>
		</li>
		
		<li>
			<a href="/category/laravel/">
				Laravel
				<span class="count">17</span>
			</a>
		</li>
		
		<li>
			<a href="/category/devops/">
				DevOps
				<span class="count">13</span>
			</a>
		</li>
		
		<li>
			<a href="/category/php/">
				PHP
				<span class="count">11</span>
			</a>
		</li>
		
		<li>
			<a href="/category/javascript/">
				JavaScript
				<span class="count">11</span>
			</a>
		</li>
		
		<li>
			<a href="/category/terminal/">
				Terminal
				<span class="count">11</span>
			</a>
		</li>
		
		<li>
			<a href="/category/algorithms/">
				Algorithms
				<span class="count">11</span>
			</a>
		</li>
		
		<li>
			<a href="/category/cryptography/">
				Cryptography
				<span class="count">11</span>
			</a>
		</li>
		
		<li>
			<a href="/category/git/">
				Git
				<span class="count">10</span>
			</a>
		</li>
		
		<li>
			<a href="/category/programming/">
				Programming
				<span class="count">9</span>
			</a>
		</li>
		
		<li>
			<a href="/category/vim/">
				VIM
				<span class="count">8</span>
			</a>
		</li>
		
		<li>
			<a href="/category/unix/">
				UNIX
				<span class="count">8</span>
			</a>
		</li>
		
		<li>
			<a href="/category/tutorial/">
				Tutorial
				<span class="count">6</span>
			</a>
		</li>
		
		<li>
			<a href="/category/update/">
				Update
				<span class="count">6</span>
			</a>
		</li>
		
		<li>
			<a href="/category/mysql/">
				MySQL
				<span class="count">6</span>
			</a>
		</li>
		
		<li>
			<a href="/category/essay/">
				Essay
				<span class="count">6</span>
			</a>
		</li>
		
		<li>
			<a href="/category/productivity/">
				Productivity
				<span class="count">5</span>
			</a>
		</li>
		
		<li>
			<a href="/category/apache/">
				Apache
				<span class="count">5</span>
			</a>
		</li>
		
		<li>
			<a href="/category/personal-challenge/">
				Personal Challenge
				<span class="count">5</span>
			</a>
		</li>
		
		<li>
			<a href="/category/blogmarks/">
				Blogmarks
				<span class="count">4</span>
			</a>
		</li>
		
		<li>
			<a href="/category/arcade-challenge/">
				Arcade Challenge
				<span class="count">4</span>
			</a>
		</li>
		
		<li>
			<a href="/category/regular-expressions/">
				Regular Expressions
				<span class="count">3</span>
			</a>
		</li>
		
		<li>
			<a href="/category/data-structures/">
				Data Structures
				<span class="count">3</span>
			</a>
		</li>
		
		<li>
			<a href="/category/user-interface/">
				User Interface
				<span class="count">3</span>
			</a>
		</li>
		
		<li>
			<a href="/category/user-experience/">
				User Experience
				<span class="count">3</span>
			</a>
		</li>
		
		<li>
			<a href="/category/general/">
				General
				<span class="count">3</span>
			</a>
		</li>
		
		<li>
			<a href="/category/docker/">
				Docker
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/aws/">
				AWS
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/generative-art/">
				Generative Art
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/css/">
				CSS
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/wget/">
				wget
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/vscode/">
				VSCode
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/email/">
				Email
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/bash/">
				Bash
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/wamp/">
				WAMP
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/python/">
				Python
				<span class="count">2</span>
			</a>
		</li>
		
		<li>
			<a href="/category/tech/">
				Tech
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/learning/">
				Learning
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/ubuntu/">
				Ubuntu
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/ssh/">
				SSH
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/databases/">
				Databases
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/tooling/">
				Tooling
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/graphics/">
				Graphics
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/selfreflection/">
				Self-reflection
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/security/">
				Security
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/cpanel/">
				cPanel
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/introduction/">
				Introduction
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/refactoring/">
				Refactoring
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/scss/">
				SCSS
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/xfce/">
				XFCE
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/chrome-devtools/">
				Chrome DevTools
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/go/">
				Go
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/ssl/">
				SSL
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/jquery/">
				jQuery
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/art/">
				Art
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/tips/">
				Tips
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/review/">
				Review
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/artificial-intelligence/">
				Artificial Intelligence
				<span class="count">1</span>
			</a>
		</li>
		
		<li>
			<a href="/category/mathematics/">
				Mathematics
				<span class="count">1</span>
			</a>
		</li>
		
	</ul>
</div>
<!-- Tags -->
			</div>
		</section>
	</div>
</main>

<footer>
    <span class="copyright">&copy; Abdush Shakoor</span>
</footer>

<script src="/static/vendor/jquery/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="/static/js/art.js"></script>

<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script defer id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98290003-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98290003-2');
</script>

<!-- <script>
    const darkModeButton = document.createElement('button');
    const syntaxHighlightSource = document.getElementById('syntaxHighlight');
    const menuList = document.querySelector('.menu');
    const themeSettings = {
        "dark": {
            "icon": '<i class="ph-moon-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github-dark.css",
        },
        "light": {
            "icon": '<i class="ph-sun-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github.min.css",
        },
    }

    function highlightMenuLink() {
        var currentURI = window.location.href;
        currentURI = currentURI.replace(window.location.protocol + "//", "");
        var currentPage	 = currentURI.split('/')[1];

        if(currentPage) {
            $('a[href="/' + currentPage + '"').parent().addClass('active');
        }
    }
    
    function initThemeSwitcher() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        darkModeButton.classList.add('darkModeButton');
        
        darkModeButton.addEventListener('click', function(){
            switch(document.documentElement.getAttribute('data-theme')) {
                case 'dark':
                    lightMode();
                    break;

                case 'light':
                default:
                    darkMode();
                    break;
            }
        });
        
        var newItem = document.createElement('li');
        newItem.appendChild(darkModeButton);
        menuList.insertBefore(newItem, menuList.childNodes[menuList.childNodes - 1]);
    }
    

    // Settings for dark mode
    function darkMode() {
        darkModeButton.innerHTML = themeSettings.dark.icon;
        document.documentElement.setAttribute('data-theme', 'dark');
        syntaxHighlightSource.setAttribute('href', themeSettings.dark.hljs);
        localStorage.setItem("theme", "dark");
    }

    // Settings for light mode
    function lightMode() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        document.documentElement.setAttribute('data-theme', '');
        syntaxHighlightSource.setAttribute('href', themeSettings.light.hljs);
        localStorage.setItem("theme", "");
    }

    function checkTheme() {
        const localStorageTheme = localStorage.getItem("theme");
        switch(localStorageTheme) {
            case "dark":
                darkMode();
                break;
            
            default:
                lightMode();
                break;
        }
    }

    // Check if the theme is stored in session
    window.onload = function() {
        initThemeSwitcher();
        checkTheme();
        highlightMenuLink();
    }

    //  open and close nav 
    $('#navbar-toggle').click(function() {
      $('nav ul').slideToggle();
    });

    // Hamburger toggle
    $('#navbar-toggle').on('click', function() {
      this.classList.toggle('active');
    });

    // Click outside the dropdown will remove the dropdown class
    $('html').click(function() {
      $('.navbar-dropdown').hide();
    });
</script> -->
</body>
</html>