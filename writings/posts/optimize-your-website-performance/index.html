<!DOCTYPE html>
<html data-theme="" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Abdush Shakoor">
	
	<meta name="description" content="Sharing my experiences on website optimization..">
	<meta name="og:title" content="Optimize your website performance | Abdush Shakoor's Weblog" />
	<meta name="og:type" content="article" />
	<meta name="og:url" content="writings/posts/optimize-your-website-performance" />
	<meta name="og:description" content="Sharing my experiences on website optimization." />
	<meta name="og:site_name" content="Abdush Shakoor's Weblog | Abdush Shakoor's Weblog" />
	
	<meta name="robots" content="follow">
	<title>Optimize your website performance | Abdush Shakoor's Weblog </title>
	<link rel="stylesheet" href="/static/css/main.css" type="text/css">
	<link rel="stylesheet" href="/static/css/pygments.css" type="text/css">

	<link rel="apple-touch-icon" sizes="57x57" href="/static/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/static/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/static/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/static/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/static/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/static/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/static/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/static/favicon/png" sizes="192x192"  href="/static/favicon/android-icon-192x192.png">
<link rel="icon" type="image/static/favicon/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
<link rel="icon" type="image/static/favicon/png" sizes="96x96" href="/static/favicon/favicon-96x96.png">
<link rel="icon" type="image/static/favicon/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
<link rel="manifest" href="/static/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
	
	<!-- <script src="https://unpkg.com/phosphor-icons"></script> -->
	<!-- <script>
		if(localStorage.theme){
			document.documentElement.setAttribute('data-theme', localStorage.getItem("theme"));
		}
	</script> -->
</head>
<body class="">
	<!-- Navbar -->
	<header class="header">
	<!-- Logo with Author Name -->
	<div class="author">
		<a href="/">
			<img src="/static/logo.png" alt="megacolorboy">
			<div class="name">
				<h1>Abdush Shakoor's Weblog</h1>
				<p>Writings, experiments & ideas.</p>
			</div>
		</a>
	</div>
	<!-- Logo with Author Name -->
	<nav>
		<ul class="menu">
			
				<li><a href="/about">About</a></li>
			
				<li><a href="/archive">Archive</a></li>
			
		</ul>
	</nav>	
</header>

<main>
	<div class="two-col-grid">
		<section id="primary">
			<div class="articles">
				
<div class="article">
	<div class="article-header">
		<h1 class="heading"><a href="/writings/posts/optimize-your-website-performance">Optimize your website performance</a></h1>
		<p class="description">Sharing my experiences on website optimization.</p>
	</div>
	<div class="article-body">
		<p>This article is directed towards audiences who are keen on making their websites and web applications load faster and perform better.</p>

<p>I won't be focusing on the SEO (Search Engine Optimization) part of it but rather, I'll be covering on how to overcome performance bottleneck issues. If you want to know more about SEO, you can go <a href="http://lmgtfy.com/?q=SEO+Optimization">here</a>.</p>

<p>Recently, I boosted my company's <a href="https://www.kit.ae">website</a> from a lagging 10-30 seconds (I know, that's really embarassing!) to a smooth 1.7 to 2.5 seconds load speed, so that's why I thought of sharing my experiences and tips on this article.</p>

<p>Before we get there, let's first understand what could probably make your website perform bad or load slowly. Afterwards, there'll be some strategies on how you could fix those issues and make it optimal.</p>

<h2>Why is my website so slow?</h2>

<p>You're not a developer if you've never heard this in your day-to-day life. In today's era, the standard average page load time is under 3 seconds, anything more than that, you might lose a visitor and that can affect your website's SEO in the long run.</p>

<p>Here are some of the reasons, in my opinion:</p>

<ul>
<li><a href="#reason1">Too many HTTP requests</a></li>
<li><a href="#reason2">Inefficient database calls/queries</a></li>
<li><a href="#reason3">Images aren't optimized</a></li>
<li><a href="#reason4">Improper page caching</a></li>
<li><a href="#reason5">Your codebase stinks</a></li>
<li><a href="#reason6">Shared Hosting Service</a></li>
</ul>

<h3><a id="reason1"></a> Too many HTTP requests</h3>

<p>According to GTMetrix, a web page should have an average of 92 requests but there are websites that have over 100+ requests and that's crazy, especially, if you try to access the website on a slower network.</p>

<p>There can be many factors that contributes to an increase in HTTP requests:</p>

<ul>
<li>Too many images on a page</li>
<li>CSS and JS files are not compressed and minified</li>
<li>Calling external libaries like jQuery or Bootstrap from a Content-Delivery Network</li>
<li>Loading all JS files at one go</li>
</ul>

<p>Since, each DOM element is generated in a top-down manner, it would display the completed page when all resources are loaded, hence is why you shouldn't have too many server requests.</p>

<h3><a id="reason2"></a> Inefficient database queries</h3>

<p>Let's say, you have a page that displays a list of products from your SQL database and you execute this query:</p>

<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products</span><span class="w"></span>
</code></pre></div>

<p>Sorry, it's inefficient. Why? In a real-life scenario, a table may contain a lot of columns and multiply that with <strong>x</strong> number of database calls the server has to make for EVERY request that comes from a visitor. You get it, right?</p>

<p>This could be worse if you have an unorganized database structure. Plan well, my friend.</p>

<h3><a id="reason3"></a> Images aren't optimized</h3>

<p>Images that are uncompressed, have a higher resolution or large file size can be detrimental to the site's performance which creates an unpleasant user experience.</p>

<h3><a id="reason4"></a> Improper page caching</h3>

<p>If you've built a dynamic page that displays a blog article, it probably performs a lot of requests/callbacks to generate a page with necessary information. Multiply that with <strong>x</strong> number of user sessions and that'll place a huge workload on the server.</p>

<h3><a id="reason5"></a> Your codebase stinks</h3>

<p>This is a very deep problem especially if the code is never refactored in a very long time.</p>

<p>Common causes of code smells are:</p>

<ul>
<li>Duplicate code</li>
<li>Large methods or classes</li>
<li>Too many parameters</li>
<li>Long line of code</li>
<li>Unnecessary uses of loops and conditions</li>
<li>Unused code</li>
</ul>

<p>There's much more to this but if you're facing this, it's about time that you start fixing your codebase and keep it mint condition.</p>

<h3><a id="reason6"></a> Shared Server Hosting</h3>

<p>Ah, this is the most common culprit. Many people host their websites on a shared server and guess what? Shared hosting means <strong><em>shared system resources</em></strong> because apart from your website, there could be 5 or more websites hosted on the same server.</p>

<h2>How to overcome these issues?</h2>

<p>Before we move on, let me just clarify that the techniques I've used below worked out for me but it may or may not work for you.</p>

<p>Here are the following methods that worked out for me:</p>

<ul>
<li><a href="#tip1">Compress &amp; Resize Images</a></li>
<li><a href="#tip2">Minify Javascript</a></li>
<li><a href="#tip3">CSS Preprocessors to the rescue!</a></li>
<li><a href="#tip4">Defer Javascript</a></li>
<li><a href="#tip5">Efficient database queries</a></li>
<li><a href="#tip6">PHP Page Caching</a></li>
<li><a href="#tip7">Refactor your codebase</a></li>
<li><a href="#tip8">LazyLoad DOM Elements</a></li>
<li><a href="#tip9">Dedicated Server</a></li>
</ul>

<h3><a id="tip1"></a> Compress &amp; Resize Images</h3>

<p>I'm sure that there are multiple ways to compress and resize an image like using Adobe Photoshop but what if there are hundreds and thousands of images? It'd be time consuming to do all of that.</p>

<p>I created an ad hoc solution using a PHP-based image extension named <a href="https://github.com/Imagick/imagick">ImageMagick</a>. This library is used to create and modify images using the ImageMagick Library.</p>

<p>Since it can be used directly from the terminal, I wrote a small script using PowerShell to compress and resize the images in all folders in one go!</p>

<p><strong>Snippet to resize images:</strong></p>

<div class="codehilite"><pre><span></span><code>magick mogrify -resize 256x256 -format *.jpg *.jpeg *.png
</code></pre></div>

<p><strong>Snippet to compress images:</strong></p>

<div class="codehilite"><pre><span></span><code>magick mogrify -quality <span class="m">70</span>% *.jpg *.jpeg *.png
</code></pre></div>

<p>The logic of the code is pretty straightforward. All it has to do is get a list of files with ends with image extensions (.jpg, .jpeg, .png) and modify the resolution to 640x480 and reduce the quality to a 70%.</p>

<p>Previously, all images of the website combined was around 800MB and after executing the script, it went down to a mere 70MB. The quality of the images weren't ruined and the aspect ratio didn't change. That's quite astounding.</p>

<h3><a id="tip2"></a> Minify Javascript</h3>

<p>Ever inspected someone's CSS or JS code on Chrome Debugger and saw something like this:</p>

<div class="codehilite"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">[</span><span class="nx">i</span><span class="o">=</span><span class="mf">0</span><span class="p">];</span><span class="nx">i</span><span class="o">&lt;</span><span class="mf">20</span><span class="p">;</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="o">++</span><span class="p">);</span>
</code></pre></div>

<p>This code above is unreadable but it still retains it's previous functionality:</p>

<div class="codehilite"><pre><span></span><code><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mf">20</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>This process is known as <a href="https://en.wikipedia.org/wiki/Minification_(programming)">minification</a>. It's a way of removing all spaces, unnecessary characters and comments that would help reduce the size of the source code and make it more efficient to be transferred over the network.</p>

<p>Using a module bundler like Webpack, you can minify and merge all of your Javascript files into one sizeable chunk. Webpack's documentation is one of the worst that I have seen and I had to take help from StackOverflow to figure it out but however, it gets the job done. </p>

<p>Want to know to configure it? Check out this <a href="https://stackoverflow.com/questions/43436754/using-webpack-with-an-existing-php-and-js-project">thread from StackOverflow</a> for more in detail.</p>

<h3><a id="tip3"></a> CSS Preprocessors to the rescue!</h3>

<p>Trust me, these are life-savers. I used to hate writing a lot of CSS but now, I like writing CSS because of this reason. I chose <strong><em>SASS</em></strong> as my CSS preprocessor and it's basically CSS-on-steroids!</p>

<p>It's got some cool features like reusable CSS code, writing functions a.k.a <code>@mixin</code> and calling them using <code>@include</code>, nested syntaxes and import multiple CSS modules.</p>

<p>Writing in <strong><em>SASS</em></strong> is no different than writing in CSS but it allows you to modularize and organize your code in a fashionable manner. This allows you to even split CSS code to different modules, especially, if your HTML component uses a lot of CSS elements.</p>

<p>Oh, you can also create a minified version of your CSS code and push it into production.</p>

<h3><a id="tip4"></a> Defer Javascript</h3>

<p>The <code>defer</code> attribute used in the <code>&lt;script&gt;</code> tag will allow the JS file to be executed after the page has finished parsing all the DOM elements.</p>

<p>When the attribute is used, it'll look like this:</p>

<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;script.js&quot;</span> <span class="na">defer</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

<p>This could save a lot of time especially if it contains code that is not critical.</p>

<p>If you want to read more about it, click <a href="https://stackoverflow.com/questions/10808109/script-tag-async-defer">here</a>.</p>

<h3><a id="tip5"></a> Efficient database queries</h3>

<p>As mentioned above, inefficient database queries could be detrimental to your website's performance. You can get rid of it with the following methods:</p>

<ul>
<li>Maintain a good table structure</li>
<li>Keep your database architecture organized. Read more about <a href="https://en.wikipedia.org/wiki/Database_normalization">Database Normalization</a></li>
<li>Keep your SQL query as simple as possible</li>
</ul>

<p>Usage of clauses like <code>WHERE</code>, <code>JOIN</code> and <code>GROUP BY</code> are important but when it comes to performance, use it wisely.</p>

<h3><a id="tip6"></a> PHP Page Caching</h3>

<p>My company's website is mostly dynamic and I realized that all it does is fetch data from the servers to generate static information.</p>

<p>So, I thought of writing a caching module, in which, when any given page is accessed in the website, it would create a fully-generated static page with an expiry time of 5 minutes. So, when another user enters the same page, it will serve the static page, so no more delays for anyone.</p>

<p>This drastically reduced the load on the website's server because as mentioned <a href="#reason4">above</a>, it takes a lot of resources to create a page, dynamically.</p>

<p>You can find the source code of the caching module in my GitHub <a href="#">repository</a>.</p>

<h3><a id="tip7"></a> Refactor your codebase</h3>

<p>Refactoring has a lot of benefits and in fact, it could reduce the size of your website, fix any unfixed bugs and more. All of which can contribute to an improved performance of your website.</p>

<p>So, please do yourself a favor and start cleaning up your codebase. If you don't know where to start, <a href="https://refactoring.guru/refactoring">go here</a>.</p>

<h3><a id="tip8"></a> LazyLoad DOM Elements</h3>

<p>Usually, whenever a page is opened by a user, it's contents are downloaded in a single go but this could be annoying if it disrupts the first view of the page.</p>

<p>So, what LazyLoad does is that instead of loading all of the content in a bulk, it only displays part of the content when a part of the page is accessed. The pages are created with a placeholder and will replace it with actual content only when the user needs it.</p>

<p>Examples of this can be seen in the form of:</p>

<ul>
<li>Image galleries</li>
<li>Social media posts</li>
<li>Infinite scrolling</li>
<li>Pagination</li>
</ul>

<p>This technique helps in performance but might create a negative impact on SEO in terms of webpage rankings.</p>

<p>If you want to give it a shot, try using this jQuery <a href="http://jquery.eisbehr.de/lazy/">library</a>.</p>

<h3><a id="tip9"></a> Dedicated Server</h3>

<p>Most hosting websites offer this service, you just have to buy a server and it would only host your website. </p>

<p>It's highly configurable and you won't have any issues regarding performance, however, it doesn't come without an expensive price tag on it but if you're willing to pay, it can be a great long-term investment.</p>

<h2>Conclusion</h2>

<p>If you've reached here, thank you for reading!</p>

<p>Let me know if any of these strategies have helped boost your website's performance and share it with other people too! Got more suggestions? Please send me an <a href="mailto:megacolorboy@gmail.com">email</a> and we can talk more about it.</p>

<p>Hope you liked reading this article!</p>

<p>Stay tuned for more!</p>

	</div>
	<div class="article-footer">
		<time>July 25th, 2019</time>
		<ul class="tags">
			
			<li>
				<a href="/category/tips/">
					Tips
				</a>
			</li>
			
		</ul>
	</div>
</div>

			</div>
		</section>
		<section id="secondary">
			<div class="sidebar">
				<div class="author-intro">
	<h3>Hello, I'm Abdush Shakoor! &#x1F44B;</h3>
	<p>I'm a programmer & designer based in Dubai, United Arab Emirates. I love tinkering with code and writing about what I learn.</p>
	<p>Like this article? Please share it with your friends and colleagues or else, <a href="mailto:megacolorboy@gmail.com">send me</a> a private message about your feedback.</p>

	<ul class="sitemap">
		<li><a class="back" href="/"><span>👈</span> Check out more articles!</a></li>
	</ul>
</div>
			</div>
		</section>
	</div>
</main>

<footer>
    <span class="copyright">&copy; Abdush Shakoor</span>
</footer>

<script src="/static/vendor/jquery/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="/static/js/art.js"></script>

<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script defer id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98290003-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98290003-2');
</script>

<!-- <script>
    const darkModeButton = document.createElement('button');
    const syntaxHighlightSource = document.getElementById('syntaxHighlight');
    const menuList = document.querySelector('.menu');
    const themeSettings = {
        "dark": {
            "icon": '<i class="ph-moon-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github-dark.css",
        },
        "light": {
            "icon": '<i class="ph-sun-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github.min.css",
        },
    }

    function highlightMenuLink() {
        var currentURI = window.location.href;
        currentURI = currentURI.replace(window.location.protocol + "//", "");
        var currentPage	 = currentURI.split('/')[1];

        if(currentPage) {
            $('a[href="/' + currentPage + '"').parent().addClass('active');
        }
    }
    
    function initThemeSwitcher() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        darkModeButton.classList.add('darkModeButton');
        
        darkModeButton.addEventListener('click', function(){
            switch(document.documentElement.getAttribute('data-theme')) {
                case 'dark':
                    lightMode();
                    break;

                case 'light':
                default:
                    darkMode();
                    break;
            }
        });
        
        var newItem = document.createElement('li');
        newItem.appendChild(darkModeButton);
        menuList.insertBefore(newItem, menuList.childNodes[menuList.childNodes - 1]);
    }
    

    // Settings for dark mode
    function darkMode() {
        darkModeButton.innerHTML = themeSettings.dark.icon;
        document.documentElement.setAttribute('data-theme', 'dark');
        syntaxHighlightSource.setAttribute('href', themeSettings.dark.hljs);
        localStorage.setItem("theme", "dark");
    }

    // Settings for light mode
    function lightMode() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        document.documentElement.setAttribute('data-theme', '');
        syntaxHighlightSource.setAttribute('href', themeSettings.light.hljs);
        localStorage.setItem("theme", "");
    }

    function checkTheme() {
        const localStorageTheme = localStorage.getItem("theme");
        switch(localStorageTheme) {
            case "dark":
                darkMode();
                break;
            
            default:
                lightMode();
                break;
        }
    }

    // Check if the theme is stored in session
    window.onload = function() {
        initThemeSwitcher();
        checkTheme();
        highlightMenuLink();
    }

    //  open and close nav 
    $('#navbar-toggle').click(function() {
      $('nav ul').slideToggle();
    });

    // Hamburger toggle
    $('#navbar-toggle').on('click', function() {
      this.classList.toggle('active');
    });

    // Click outside the dropdown will remove the dropdown class
    $('html').click(function() {
      $('.navbar-dropdown').hide();
    });
</script> -->
</body>
</html>