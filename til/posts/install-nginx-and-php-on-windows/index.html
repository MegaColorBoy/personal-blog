<!DOCTYPE html>
<html data-theme="" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Abdush Shakoor">
	<title>Install NGINX and PHP on Windows | megacolorboy</title>

	
	<meta name="description" content="Thought of writing a small tutorial on how to install NGINX and PHP on Windows. You can also use this as a reference if you wanted to install them on Windows Server too. NoteThis tutorial won't teach you how to configure both PHP and NGINX configurations as there are a lot of tutorials focusing on that topic.Setting up NGINXDownload NGINX for WindowsGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Go to  and create two new folders named  and .To test, if it's working, double-click on  and type  in the browser. You should be able to see a Welcome page.Kill the NGINX process from Task Manager.Setting up PHPDownload PHP 8.1 for Windows.Go to  directory and create a folder named  or if you wanted to have multiple versions, .Unzip the downloaded  file in  directory.Add PHP to your system environment variables by adding the path Open Command Prompt and type . You see should be able to see the version if it's installed correctly.Run NGINX and PHP as separate servicesGenerally, it's good practice to run both PHP and NGINX as background services or else, you might have to start the processes manually every time the server goes down.As I was looking for a way to do that, I stumbled upon this post on StackOverflow and it was quite helpful.Install NSSM Service ManagerNSSM Service Manager is a free open-source alternative that helps you create a service with the help of GUI. Below are the steps that I followed:Download NSSM Service ManagerGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Install NGINX as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Click on .Press  and type .Look for  and start the service.Open your browser and type  to see if it's working correctly.Install PHP as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Add the arguments: Click on .Press  and type .Look for  and start the service.Useful commands while using NSSMTest to see if it works!Before you proceed with the following steps, ensure that you include the  files from the  folder in your  file.Add the following line to your  file:Go to  directory and create .Go to  and create directory.Refer to the sample configuration provided and make the necessary changes.To enable the site, you have to create a symlink: .Ensure the configuration doesn't have any errors by typing  in  directory.Restart the NSSM service.Add an entry in your hosts file: .And you're done! TipIf you get a "Connection Refused" or error that is similar to that, it's most probably due to firewall or maybe the PHP service isn't running.Sample NGINX Virtual Host ConfigurationConclusionIf you've gotten this far, give yourself a pat in the back.Hope you've found this tutorial useful and please share it with your friends and colleagues if they really need it!.">
	<meta name="og:title" content="Install NGINX and PHP on Windows | megacolorboy" />
	<meta name="og:type" content="article" />
	<meta name="og:url" content="https://www.megacolorboy.com/posts/install-nginx-and-php-on-windows/" />
	<meta name="og:description" content="Thought of writing a small tutorial on how to install NGINX and PHP on Windows. You can also use this as a reference if you wanted to install them on Windows Server too. NoteThis tutorial won't teach you how to configure both PHP and NGINX configurations as there are a lot of tutorials focusing on that topic.Setting up NGINXDownload NGINX for WindowsGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Go to  and create two new folders named  and .To test, if it's working, double-click on  and type  in the browser. You should be able to see a Welcome page.Kill the NGINX process from Task Manager.Setting up PHPDownload PHP 8.1 for Windows.Go to  directory and create a folder named  or if you wanted to have multiple versions, .Unzip the downloaded  file in  directory.Add PHP to your system environment variables by adding the path Open Command Prompt and type . You see should be able to see the version if it's installed correctly.Run NGINX and PHP as separate servicesGenerally, it's good practice to run both PHP and NGINX as background services or else, you might have to start the processes manually every time the server goes down.As I was looking for a way to do that, I stumbled upon this post on StackOverflow and it was quite helpful.Install NSSM Service ManagerNSSM Service Manager is a free open-source alternative that helps you create a service with the help of GUI. Below are the steps that I followed:Download NSSM Service ManagerGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Install NGINX as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Click on .Press  and type .Look for  and start the service.Open your browser and type  to see if it's working correctly.Install PHP as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Add the arguments: Click on .Press  and type .Look for  and start the service.Useful commands while using NSSMTest to see if it works!Before you proceed with the following steps, ensure that you include the  files from the  folder in your  file.Add the following line to your  file:Go to  directory and create .Go to  and create directory.Refer to the sample configuration provided and make the necessary changes.To enable the site, you have to create a symlink: .Ensure the configuration doesn't have any errors by typing  in  directory.Restart the NSSM service.Add an entry in your hosts file: .And you're done! TipIf you get a "Connection Refused" or error that is similar to that, it's most probably due to firewall or maybe the PHP service isn't running.Sample NGINX Virtual Host ConfigurationConclusionIf you've gotten this far, give yourself a pat in the back.Hope you've found this tutorial useful and please share it with your friends and colleagues if they really need it!" />
	<meta name="og:site_name" content="Abdush Shakoor's Blog | megacolorboy" />
	
	
	<link rel="stylesheet" href="/static/css/main.css" type="text/css">
	<link id="syntaxHighlight" rel="stylesheet" href="/static/vendor/hljs/css/github.min.css">
	<link href="/static/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
	
	<script src="https://unpkg.com/phosphor-icons"></script>
	<!-- Add OG tags  -->

	<script>
		if(localStorage.theme){
			document.documentElement.setAttribute('data-theme', localStorage.getItem("theme"));
		}
	</script>

</head>
<body class="details-page til">
	<!-- Navbar -->
	<header class="header">
	<div class="author">
		<a href="/">
			<div class="logo" style="background-image: url('../static/logo.gif');"></div>
			<p>megacolorboy</p>
		</a>
	</div>
	<div class="nav-mobile"><a id="navbar-toggle" href="#!"><span></span></a></div>
	<nav>
		<ul class="menu">
			
				<li><a href="/about">About</a></li>
			
				<li><a href="/writings">Writings</a></li>
			
				<li><a href="/til">Today I Learned</a></li>
			
				<li><a href="/resume">Resume</a></li>
			
		</ul>
	</nav>
</header>

<div class="article-top">
	<a class="back" href="/til"><span>&larr;</span> Back</a>
	<p class="date">Published on February 27th, 2022</p>	
</div>

<main>
	<section class="article-head">
		<p class="cat">Tutorial</p>
		<h1>Install NGINX and PHP on Windows</h1>
		
			<p class="desc">Thought of writing a small tutorial on how to install NGINX and PHP on Windows. You can also use this as a reference if you wanted to install them on Windows Server too. NoteThis tutorial won't teach you how to configure both PHP and NGINX configurations as there are a lot of tutorials focusing on that topic.Setting up NGINXDownload NGINX for WindowsGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Go to  and create two new folders named  and .To test, if it's working, double-click on  and type  in the browser. You should be able to see a Welcome page.Kill the NGINX process from Task Manager.Setting up PHPDownload PHP 8.1 for Windows.Go to  directory and create a folder named  or if you wanted to have multiple versions, .Unzip the downloaded  file in  directory.Add PHP to your system environment variables by adding the path Open Command Prompt and type . You see should be able to see the version if it's installed correctly.Run NGINX and PHP as separate servicesGenerally, it's good practice to run both PHP and NGINX as background services or else, you might have to start the processes manually every time the server goes down.As I was looking for a way to do that, I stumbled upon this post on StackOverflow and it was quite helpful.Install NSSM Service ManagerNSSM Service Manager is a free open-source alternative that helps you create a service with the help of GUI. Below are the steps that I followed:Download NSSM Service ManagerGo to  directory and create a folder named .Unzip the downloaded  file in  directory.Install NGINX as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Click on .Press  and type .Look for  and start the service.Open your browser and type  to see if it's working correctly.Install PHP as a serviceOpen Command Prompt as an Administrator.Go to  directory.Type Define the path of the  file.Add the arguments: Click on .Press  and type .Look for  and start the service.Useful commands while using NSSMTest to see if it works!Before you proceed with the following steps, ensure that you include the  files from the  folder in your  file.Add the following line to your  file:Go to  directory and create .Go to  and create directory.Refer to the sample configuration provided and make the necessary changes.To enable the site, you have to create a symlink: .Ensure the configuration doesn't have any errors by typing  in  directory.Restart the NSSM service.Add an entry in your hosts file: .And you're done! TipIf you get a "Connection Refused" or error that is similar to that, it's most probably due to firewall or maybe the PHP service isn't running.Sample NGINX Virtual Host ConfigurationConclusionIf you've gotten this far, give yourself a pat in the back.Hope you've found this tutorial useful and please share it with your friends and colleagues if they really need it!</p>
		
		<p class="date">3 minutes read</p>
	</section>
	<article>
		<p>Thought of writing a small tutorial on how to install NGINX and PHP on Windows. You can also use this as a reference if you wanted to install them on Windows Server too.</p>

<div class="post-notification warning">
    <h3><i class="ph-warning-light"></i> Note</h3>
    <p>This tutorial won't teach you how to configure both PHP and NGINX configurations as there are a lot of tutorials focusing on that topic.</p>
</div>

<h2>Setting up NGINX</h2>

<ol>
<li>Download <a href="http://nginx.org/en/docs/windows.html">NGINX for Windows</a></li>
<li>Go to <code>C:/</code> directory and create a folder named <code>C:/nginx</code>.</li>
<li>Unzip the downloaded <code>.zip</code> file in <code>C:/nginx</code> directory.</li>
<li>Go to <code>C:/nginx</code> and create two new folders named <code>sites-available</code> and <code>sites-enabled</code>.</li>
<li>To test, if it's working, double-click on <code>C:/nginx/nginx.exe</code> and type <code>localhost</code> in the browser. You should be able to see a Welcome page.</li>
<li>Kill the NGINX process from Task Manager.</li>
</ol>

<h2>Setting up PHP</h2>

<ol>
<li>Download <a href="https://windows.php.net/downloads/releases/php-8.1.1-nts-Win32-vs16-x64.zip">PHP 8.1 for Windows</a>.</li>
<li>Go to <code>C:/</code> directory and create a folder named <code>C:/php</code> or if you wanted to have multiple versions, <code>C:/php8.1</code>.</li>
<li>Unzip the downloaded <code>.zip</code> file in <code>C:/php</code> directory.</li>
<li>Add PHP to your system environment variables by adding the path <code>C:/php</code></li>
<li>Open Command Prompt and type <code>php -v</code>. You see should be able to see the version if it's installed correctly.</li>
</ol>

<h2>Run NGINX and PHP as separate services</h2>

<p>Generally, it's good practice to run both PHP and NGINX as background services or else, you might have to start the processes manually every time the server goes down.</p>

<p>As I was looking for a way to do that, I stumbled upon this post on <a href="https://stackoverflow.com/questions/40846356/run-nginx-as-windows-service">StackOverflow</a> and it was quite helpful.</p>

<h3>Install NSSM Service Manager</h3>

<p>NSSM Service Manager is a free open-source alternative that helps you create a service with the help of GUI. Below are the steps that I followed:</p>

<ol>
<li>Download <a href="https://nssm.cc/download">NSSM Service Manager</a></li>
<li>Go to <code>C:/</code> directory and create a folder named <code>C:/nssm</code>.</li>
<li>Unzip the downloaded <code>.zip</code> file in <code>C:/nssm</code> directory.</li>
</ol>

<h3>Install NGINX as a service</h3>

<ol>
<li>Open Command Prompt as an Administrator.</li>
<li>Go to <code>C:/nssm/win64/</code> directory.</li>
<li>Type <code>nssm install nginx</code></li>
<li>Define the path of the <code>nginx.exe</code> file.</li>
<li>Click on <code>Install Service</code>.</li>
<li>Press <code>Win+R</code> and type <code>services.msc</code>.</li>
<li>Look for <code>nginx</code> and start the service.</li>
<li>Open your browser and type <code>localhost</code> to see if it's working correctly.</li>
</ol>

<h3>Install PHP as a service</h3>

<ol>
<li>Open Command Prompt as an Administrator.</li>
<li>Go to <code>C:/nssm/win64/</code> directory.</li>
<li>Type <code>nssm install php</code></li>
<li>Define the path of the <code>php-cgi.exe</code> file.</li>
<li>Add the arguments: <code>-b 127.0.0.1:9000</code></li>
<li>Click on <code>Install Service</code>.</li>
<li>Press <code>Win+R</code> and type <code>services.msc</code>.</li>
<li>Look for <code>php</code> and start the service.</li>
</ol>

<h3>Useful commands while using NSSM</h3>

<pre>
<code class="bash">
nssm start  "servicename" -- Start a service
nssm restart "servicename" -- Restart a service
nssm stop "servicename" -- Stop a service
nssm install "servicename" -- Install a service
nssm remove "servicename" -- Remove/Uninstall a service
</code>
</pre>

<h3>Test to see if it works!</h3>

<p>Before you proceed with the following steps, ensure that you include the <code>*.conf</code> files from the <code>sites-enabled</code> folder in your <code>nginx.conf</code> file.</p>

<p>Add the following line to your <code>nginx.conf</code> file:</p>

<pre>
<code class="bash">
include "C:/nginx/sites-enabled/*.conf";
</code>
</pre>

<ol>
<li>Go to <code>C:/nginx/sites-available</code> directory and create <code>example.com.conf</code>.</li>
<li>Go to <code>C:/nginx/html</code> and create directory.</li>
<li>Refer to the <a href="#nginx-config">sample configuration</a> provided and make the necessary changes.</li>
<li>To enable the site, you have to create a symlink: <code>mklink "C:\nginx\sites-available\example.com.conf" "C:\nginx\sites-enabled\example.com.conf"</code>.</li>
<li>Ensure the configuration doesn't have any errors by typing <code>nginx -t</code> in <code>C:/nginx</code> directory.</li>
<li>Restart the NSSM service.</li>
<li>Add an entry in your hosts file: <code>127.0.0.1 example.com</code>.</li>
<li>And you're done!</li>
</ol>

<div class="post-notification warning">
    <h3><i class="ph-warning-light"></i> Tip</h3>
    <p>If you get a "Connection Refused" or error that is similar to that, it's most probably due to firewall or maybe the PHP service isn't running.</p>
</div>

<h3>Sample NGINX Virtual Host Configuration</h3>

<pre id="nginx-config">
<code class="bash">
server {

    # Your Domain Name
    listen 80;
    server_name example.com;

    autoindex off;
    add_header X-Frame-Options "SAMEORIGIN";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Content-Type-Options "nosniff";
    add_header X-XSS-Protection "1; mode=block";
    add_header Access-Control-Allow-Origin *;

    if (!-e $request_filename) {
        rewrite  ^/[_0-9a-zA-Z-]+(/wp-(content|admin|includes).*) $1 break;
        rewrite  ^/[_0-9a-zA-Z-]+(/.*\.php)$ $1 break;
    }

    # Uncomment these lines if SSL is provided
    #==========================
    #listen 443 ssl;
    #ssl_certificate your-ssl.pem;
    #ssl_certificate_key your-ssl.key;
    #ssl_protocols TLSv1 TLSv1.1 TLSv1.2; 
    #ssl_prefer_server_ciphers on;
    #ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';
    #==========================

    # Log files for Debugging
    access_log logs/example-access.log;
    error_log logs/example-error.log;

    # Directory
    root "C:/nginx/html/example.com";
    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ /\.(?!well-known).* {
        deny all;
        access_log off;
        log_not_found off;
    }

    # Deny yaml, twig, markdown, ini file access
    location ~* /.+\.(markdown|md|twig|yaml|yml|ini)$ {
        deny all;
        access_log off;
        log_not_found off;
    }

    # PHP-FPM Configuration Nginx
    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }
}
</code>
</pre>

<h2>Conclusion</h2>

<p>If you've gotten this far, give yourself a pat in the back.</p>

<p>Hope you've found this tutorial useful and please share it with your friends and colleagues if they really need it!</p>

	</article>
</main>

<script src="/static/vendor/jquery/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="/static/vendor/hljs/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98290003-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98290003-2');
</script>

<script>
    const darkModeButton = document.createElement('button');
    const syntaxHighlightSource = document.getElementById('syntaxHighlight');
    const menuList = document.querySelector('.menu');
    const themeSettings = {
        "dark": {
            "icon": '<i class="ph-moon-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github-dark.css",
        },
        "light": {
            "icon": '<i class="ph-sun-fill"></i>',
            "hljs": "/static/vendor/hljs/css/github.min.css",
        },
    }

    function highlightMenuLink() {
        var currentURI = window.location.href;
        currentURI = currentURI.replace(window.location.protocol + "//", "");
        var currentPage	 = currentURI.split('/')[1];

        if(currentPage) {
            $('a[href="/' + currentPage + '"').parent().addClass('active');
        }
    }
    
    function initThemeSwitcher() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        darkModeButton.classList.add('darkModeButton');
        
        darkModeButton.addEventListener('click', function(){
            switch(document.documentElement.getAttribute('data-theme')) {
                case 'dark':
                    lightMode();
                    break;

                case 'light':
                default:
                    darkMode();
                    break;
            }
        });
        
        var newItem = document.createElement('li');
        newItem.appendChild(darkModeButton);
        menuList.insertBefore(newItem, menuList.childNodes[menuList.childNodes - 1]);
    }
    

    // Settings for dark mode
    function darkMode() {
        darkModeButton.innerHTML = themeSettings.dark.icon;
        document.documentElement.setAttribute('data-theme', 'dark');
        syntaxHighlightSource.setAttribute('href', themeSettings.dark.hljs);
        localStorage.setItem("theme", "dark");
    }

    // Settings for light mode
    function lightMode() {
        darkModeButton.innerHTML = themeSettings.light.icon;
        document.documentElement.setAttribute('data-theme', '');
        syntaxHighlightSource.setAttribute('href', themeSettings.light.hljs);
        localStorage.setItem("theme", "");
    }

    function checkTheme() {
        const localStorageTheme = localStorage.getItem("theme");
        switch(localStorageTheme) {
            case "dark":
                darkMode();
                break;
            
            default:
                lightMode();
                break;
        }
    }

    // Check if the theme is stored in session
    window.onload = function() {
        initThemeSwitcher();
        checkTheme();
        highlightMenuLink();
    }

    //  open and close nav 
    $('#navbar-toggle').click(function() {
      $('nav ul').slideToggle();
    });

    // Hamburger toggle
    $('#navbar-toggle').on('click', function() {
      this.classList.toggle('active');
    });

    // Click outside the dropdown will remove the dropdown class
    $('html').click(function() {
      $('.navbar-dropdown').hide();
    });
</script>
</body>
</html>