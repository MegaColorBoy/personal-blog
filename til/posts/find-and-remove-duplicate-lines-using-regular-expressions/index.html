<!DOCTYPE html>
<html>
<head>
	<title>Find and remove duplicate lines using Regular Expressions | megacolorboy</title>
	<base href="/"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Abdush Shakoor">
	<meta name="description" content="Find and remove duplicate lines using Regular Expressions">
	<link href="../static/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
	<link rel="stylesheet" href="../static/css/til.css" type="text/css"/>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/an-old-hope.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
</head>
<body>
	<!-- Website header -->
	<header class="navbar">
		<a class="logo-link" href="/til">
			<div class="header-logo">
				<img src="/static/images/avatar2.gif"/>
				<div class="logo-text">
					<p class="logo-title">mega<span class="trademark">color</span>boy</p>
					<p class="logo-subtitle">The microblog of Abdush Shakoor</p>
				</div>
			</div>
		</a>
	</header>

	<main>
		<div class="_til-grid">
			<div class="_item">
				<div class="_wrapper">					
					<div class="_heading">
						<p class="tag"><span>Regular Expressions</span></p>
						<h1>Find and remove duplicate lines using Regular Expressions</h1>
						<div>
							<p class="_date">Published on November 7th, 2020</p>
						</div>
					</div>
					<hr/>
					<div class="_content">
						<p>Open up your text editor and use the following RegEx pattern to find and remove the duplicate lines:</p>

<pre>
<code>
^(.*)(\r?\n\1)+$
</code>
</pre>

<p>I found this technique on <a href="http://www.regular-expressions.info/duplicatelines.html">Regular-Expressions.info</a> and I'm going to quote their explanation over here:</p>

<blockquote>
  <p>The caret will match only at the start of a line. So the regex engine will only attempt to match the remainder of the regex there. The dot and star combination simply matches an entire line, whatever its contents, if any. The parentheses store the matched line into the first backreference.</p>
  
  <p>Next we will match the line separator. I put the question mark into <code>\r?\n</code> to make this regex work with both Windows <code>(\r\n)</code> and UNIX <code>(\n)</code> text files. So up to this point we matched a line and the following line break.</p>
  
  <p>Now we need to check if this combination is followed by a duplicate of that same line. We do this simply with <code>\1</code>. This is the first backreference which holds the line we matched. The backreference will match that very same text.</p>
  
  <p>If the backreference fails to match, the regex match and the backreference are discarded, and the regex engine tries again at the start of the next line. If the backreference succeeds, the plus symbol in the regular expression will try to match additional copies of the line. Finally, the dollar symbol forces the regex engine to check if the text matched by the backreference is a complete line. We already know the text matched by the backreference is preceded by a line break (matched by <code>\r?\n</code>).</p>
  
  <p>Therefore, we now check if it is also followed by a line break or if it is at the end of the file using the dollar sign.</p>
  
  <p>The entire match becomes <code>line\nline</code> (or <code>line\nline\nline</code> etc.). Because we are doing a search and replace, the line, its duplicates, and the line breaks in between them, are all deleted from the file. Since we want to keep the original line, but not the duplicates, we use <code>\1</code> as the replacement text to put the original line back in.</p>
</blockquote>

<p>Hope you found this tip useful!</p>

						<hr/>
						<div class="_footer">
							
							<div class="share-container">
								<p>Like this? Share it with others!</p>
								<div class="share-links">
									<a href="https://www.facebook.com/sharer/sharer.php?u=https://www.megacolorboy.com/til/posts/find-and-remove-duplicate-lines-using-regular-expressions/"><i class="fab fa-facebook-f"></i></a>
									<a href="https://www.twitter.com/home?status=https://www.megacolorboy.com/til/posts/find-and-remove-duplicate-lines-using-regular-expressions/"><i class="fab fa-twitter"></i></a>
									<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.megacolorboy.com/til/posts/find-and-remove-duplicate-lines-using-regular-expressions/&title=Find and remove duplicate lines using Regular Expressions | megacolorboy&summary=&source="><i class="fab fa-linkedin-in"></i></a>
									<a href="https://www.plus.google.com/share?url=https://www.megacolorboy.com/til/posts/find-and-remove-duplicate-lines-using-regular-expressions/"><i class="fab fa-google-plus-g"></i></a>
								</div>
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>

	</main>
</body>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98290003-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98290003-2');
</script>
</html>