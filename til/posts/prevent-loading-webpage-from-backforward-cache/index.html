<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Prevent loading a webpage from Back-Forward cache | megacolorboy</title>
	<link rel="stylesheet" href="/static/css/main.css" type="text/css">
	<link rel="stylesheet" href="/static/vendor/hljs/css/default.min.css">
	<!-- Add OG tags  -->
</head>
<body class="details-page til">
	<!-- Navbar -->
	<header class="header">
	<div class="author">
		<a href="/">
			<div class="logo"></div>
			<p>megacolorboy</p>
		</a>
	</div>
	<nav>
		<ul class="menu">
			
				<li><a href="/about">About</a></li>
			
				<li><a href="/writings">Writings</a></li>
			
				<li><a href="/til">Today I Learned</a></li>
			
		</ul>
	</nav>
</header>

<div class="article-top">
	<a class="back" href="/til"><span>&larr;</span> Back</a>
	<p class="date">Published on August 30th, 2020</p>	
</div>

<main>
	<section class="article-head">
		<p class="cat">JavaScript</p>
		<h1>Prevent loading a webpage from Back-Forward cache</h1>
		
			<p>I'm working on an eCommerce project and I encountered a really weird problem, whenever I saved items into my cart and proceed to the checkout page and then go back to previous page, my cart isn't updated until I refresh the page.Honestly, I thought this was a bug until I came around to learn about Back-Forward Caching a.k.a bfcache, which allows the user to navigate between pages faster. That's a good thing, though!But that didn't help resolve my issue, so I thought of going around with a tiny hack:The code above will look any persistence of the  event. Initially, it's set to  and if the page is loaded from bfcache, it'll set to .I wouldn't really consider this as a solution as it only worked on Safari instead of Chrome or Firefox.But hey, it gets the job done! ðŸ˜‚</p>
		
		<p class="date">1 minute read</p>
	</section>
	<article>
		<p>I'm working on an eCommerce project and I encountered a really weird problem, whenever I saved items into my cart and proceed to the checkout page and then go back to previous page, my cart isn't updated until I refresh the page.</p>

<p>Honestly, I thought this was a bug until I came around to learn about <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/1.5/Using_Firefox_1.5_caching">Back-Forward Caching</a> a.k.a <strong>bfcache</strong>, which allows the user to navigate between pages faster. That's a good thing, though!</p>

<p>But that didn't help resolve my issue, so I thought of going around with a tiny hack:</p>

<pre>
<code class="js">
window.onpageshow = function(event) {
    if (event.persisted) {
        window.location.reload() 
    }
};
</code>
</pre>

<p>The code above will look any persistence of the <code>onpageshow</code> event. Initially, it's set to <code>false</code> and if the page is loaded from <strong>bfcache</strong>, it'll set to <code>true</code>.</p>

<p>I wouldn't really consider this as a solution as it only worked on Safari instead of Chrome or Firefox.</p>

<p>But hey, it gets the job done! &#x1F602;</p>

	</article>
</main>

<script src="/static/vendor/jquery/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="/static/vendor/hljs/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>